---
title: "Phenology and Mycorrhizae Manuscript"
author: "Kathryn Wheeler"
date: "11/18/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#Load Functions and Variables
```{r}
source('sharedVariables.R')
source('NEON_Data_DownloadAndProcess.R')
```

Download NEON Data

#Single Air Temperature At Various Heights 
```{r}
dataName="NEON_SingleAirTemperature"
NEON_ID='DP1.00002.001'
selectColumns <- c('horizontalPosition','verticalPosition','tempSingleMean','tempSingleExpUncert','finalQF')
inFileName <- "SAAT_30min.csv"

downloadNEONdata(dataName=dataName,NEON_ID=NEON_ID)
combineNEONdata(dataName=dataName,NEON_ID=NEON_ID,selectColumns=selectColumns,
                inFileName=inFileName,dataPath=dataPath)


```

#Triple Air Temperature at Top of Canopy
```{r} 
##Need to redownload!! 
dataName="NEON_TemperatureData"
NEON_ID='DP1.00003.001'
selectColumns <- c('tempTripleMean','finalQF')
inFileName <- "TAAT_30min.csv"
varName <- 'tempTripleMean'

downloadNEONdata(dataName=dataName,NEON_ID=NEON_ID)
combineNEONdata(dataName=dataName,NEON_ID=NEON_ID,selectColumns=selectColumns,
                inFileName=inFileName,dataPath=dataPath)
calculateDailyWeather(dataName=dataName,dataPath=dataPath,varName=varName,funType=mean)
gapFillFromDaymet(dataName=dataName,dataPath=dataPath,varName=varName)

```

#Precipitation
```{r}
dataName="NEON_PrecipitationData"
NEON_ID='DP1.00006.001'
selectColumns <- c('precipBulk','precipExpUncert','precipQF')
inFileName <- c("PRIPRE_30min.csv","SECPRE_30min.csv")
varName <- "precipBulk"

downloadNEONdata(dataName=dataName,NEON_ID=NEON_ID)
combineNEONdata(dataName=dataName,NEON_ID=NEON_ID,selectColumns=selectColumns,
                inFileName=inFileName,dataPath=dataPath)
calculateDailyWeather(dataName=dataName,dataPath=dataPath,varName=varName,funType=sum)
gapFillFromDaymet(dataName=dataName,dataPath=dataPath,varName=varName)

```

#NEON Phenology Observations 
```{r}
source('combineNEONdata_PhenoObs.R')
dataName="NEON_PhenologyObservations"
NEON_ID='DP1.10055.001'

downloadNEONdata(dataName=dataName,NEON_ID=NEON_ID)
combineNEONdata_PhenoObs(saveType=="bySite") #Saved in individual files by site because 1 file was too large 
combineNEONdata_PhenoObs(saveType=="firstOfPhenophase")
combineNEONdata_PhenoObs(saveType = "allOfPhenophase")
```

#Calculate Cummulative Weather for Each Individual phenophase intensity pair
```{r}

```



#NEON PhenoCam Observations
```{r}
source('determinePhenoCamURLs.R')
source('downloadPhenoCamAndCalculateTransitions.R') #Still need to change to have it save it somewhere

```

